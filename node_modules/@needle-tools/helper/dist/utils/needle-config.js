import { existsSync, readFileSync } from "fs";
export function tryReadNeedleConfig(args) {
    try {
        const dir = args.directory;
        const path = dir + "/needle.config.json";
        if (existsSync(path)) {
            const content = readFileSync(path).toString();
            const json = JSON.parse(content);
            if (json.buildDirectory) {
                json.buildDirectory = dir + "/" + json.buildDirectory;
            }
            if (json.assetsDirectory) {
                json.assetsDirectory = dir + "/" + json.assetsDirectory;
            }
            return json;
        }
    }
    catch (e) {
        console.error("WARN: Could not read needle config - " + e);
    }
    return null;
}
