import { existsSync, readFileSync } from "fs";
import { getCurrentDirectory } from "./path-utils.js";
export function tryReadFromEnv(name) {
    if (process.env[name]) {
        return process.env[name];
    }
    const env_file = getCurrentDirectory() + "/.env";
    if (existsSync(env_file)) {
        const content = readFileSync(env_file).toString();
        const lines = content.split("\n");
        for (const line of lines) {
            const parts = line.split("=");
            if (parts.length >= 2) {
                if (parts[0] === name) {
                    const res = parts[1]?.trim();
                    if (res?.length <= 0) {
                        console.log("WARN: Empty value for " + name);
                        return null;
                    }
                    return res;
                }
            }
        }
    }
    return null;
}
