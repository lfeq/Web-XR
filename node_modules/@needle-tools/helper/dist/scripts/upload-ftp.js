import commandLineArgs from "command-line-args";
import { upload_to_ftp } from "../actions/upload-to-ftp.js";
const optionDefinitions = [
    { name: 'server', type: String, multiple: false },
    { name: 'username', type: String, multiple: false },
    { name: 'password', type: String, multiple: false },
    { name: 'remotepath', type: String, multiple: false },
    { name: 'localpath', type: String, multiple: false },
    { name: "sftp", type: Boolean },
    { name: "delete", type: Boolean },
    { name: "port", type: Number },
];
const options = commandLineArgs(optionDefinitions, { partial: true });
if (!options.server?.length) {
    console.error("No file specified. Use --server <server>");
    process.exit(1);
}
if (!options.username?.length) {
    console.error("No username specified. Use --username <username>");
    process.exit(1);
}
if (!options.password?.length) {
    console.error("No password specified. Use --password <password>");
    process.exit(1);
}
const remotePath = options.remotepath ?? "/";
if (!remotePath?.length) {
    console.error("No remote path specified. Use --remotepath <path>");
    process.exit(1);
}
if (!options.localpath?.length) {
    console.error("No local path specified. Use --localpath <path>");
    process.exit(1);
}
const sftp = options.sftp ?? false;
const delete_remote = options.delete ?? false;
let port = options.port;
if (options.port === undefined) {
    if (sftp)
        port = 22;
    else
        port = 21;
}
upload_to_ftp(options.server, options.username, options.password, remotePath, options.localpath, sftp, delete_remote, port).then(() => {
    process.exit(0);
});
