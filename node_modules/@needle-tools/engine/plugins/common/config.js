import { existsSync, readFileSync } from "fs";

export function getMeta() {
    const workingDirectory = process.cwd();
    const configPath = workingDirectory + "/needle.config.json";
    if(existsSync(configPath)) {
        const configStr = readFileSync(configPath);
        const config = JSON.parse(configStr);
        if(config.codegenDirectory) {
            const dir = workingDirectory + "/" + config.codegenDirectory + "/meta.json";
            if(existsSync(dir)) {
                const metaStr = readFileSync(dir);
                /**@type {import("../types").needleConfig} */
                const meta = JSON.parse(metaStr);
                return meta;
            }
        }
    }
    return null;
}